// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model City {
  id         Int      @id @default(autoincrement())
  state      State    @relation(fields: [state_id], references: [id])
  state_id   Int
  name       String
  updated_at DateTime @updatedAt
}

model State {
  id            Int      @id @default(autoincrement())
  city          City[]
  gst_code      String
  abbreviation  String
  priority      String
  name          String
  updated_at    DateTime @updatedAt
}

model User {
  id         Int      @id @default(autoincrement())
  username   String   @db.VarChar(64)
  first_name String   @db.VarChar(32)
  last_name  String   @db.VarChar(32)
  phone      String
  email      String   @db.VarChar(128)
  code       String
  type       String
  password   String
  updated_at DateTime @updatedAt

  @@unique([email])
}

model Supplier {
  id                  Int      @id @default(autoincrement())
  address             Json
  name                String
  phone               String
  email               String
  fax_number          String
  pincode             String
  primary_name        String
  primary_designation String
  primary_phone       String
  primary_email       String
  cst_no              String
  ecc_no              String
  tin_number          String
  gst_number          String
  pan_number          String
  updated_at          DateTime @updatedAt

  @@unique([email])
}

model Process {
  id              Int      @id @default(autoincrement())
  name            String
  duration        String
  min_inward_days String
  status          String
  updated_at      DateTime @updatedAt
}

model Group {
  id          Int      @id @default(autoincrement())
  name        String
  rate        String
  description String
  status      String
  updated_at  DateTime @updatedAt
  item        Item[]
}

model Item {
  id                  Int      @id @default(autoincrement())
  name                String
  code                String
  classification_code String
  drawing_code        String
  drawing_file        String
  description         String
  status              String
  updated_at          DateTime @updatedAt
  group               Group?   @relation(fields: [group_id], references: [id])
  group_id            Int?
  unit                Unit?    @relation(fields: [unit_id], references: [id])
  unit_id             Int?
}

model Transport {
  id             Int      @id @default(autoincrement())
  name           String
  vehicle        String
  vehicle_number String
  contact_number String
  updated_at     DateTime @updatedAt
}

model Unit {
  id         Int      @id @default(autoincrement())
  name       String
  code       String
  status     String
  updated_at DateTime @updatedAt
  item       Item[]
}
